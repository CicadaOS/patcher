From d6bdc3b4ece479f26d145c8742b66f1593ed59d6 Mon Sep 17 00:00:00 2001
From: Rashed Abdel-Tawab <rashed@linux.com>
Date: Sun, 28 Jan 2018 11:26:08 -0800
Subject: [PATCH 6/6] soong_config: Add BOARD_USES_QCOM_HARDWARE variable

Change-Id: I925b137edeed9fa11bbe566002147b444328c661
---
 build/soong/android/variable.go | 5 +++++
 build/soong/soong_config.mk     | 3 ++-
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/build/soong/android/variable.go b/build/soong/android/variable.go
index bf7992de..785ac859 100644
--- a/build/soong/android/variable.go
+++ b/build/soong/android/variable.go
@@ -18,6 +18,10 @@ type Product_variables struct {
 	Uses_qcom_bsp_legacy struct {
 		Cppflags []string
 	}
+	Uses_qcom_hardware struct {
+		Cppflags []string
+		Shared_libs []string
+	}
 }
 
 type ProductVariables struct {
@@ -28,4 +32,5 @@ type ProductVariables struct {
 	Uses_generic_camera_parameter_library  *bool `json:",omitempty"`
 	Uses_media_extensions  *bool `json:",omitempty"`
 	Uses_qcom_bsp_legacy  *bool `json:",omitempty"`
+	Uses_qcom_hardware  *bool `json:",omitempty"`
 }
diff --git a/build/soong/soong_config.mk b/build/soong/soong_config.mk
index d9af7ab0..221b33a5 100644
--- a/build/soong/soong_config.mk
+++ b/build/soong/soong_config.mk
@@ -10,6 +10,7 @@ lineage_soong:
 	echo '    "Target_shim_libs": "$(subst $(space),:,$(TARGET_LD_SHIM_LIBS))",'; \
 	echo '    "Uses_generic_camera_parameter_library": $(if $(TARGET_SPECIFIC_CAMERA_PARAMETER_LIBRARY),false,true),'; \
 	echo '    "Uses_media_extensions": $(if $(filter true,$(TARGET_USES_MEDIA_EXTENSIONS)),true,false),'; \
-	echo '    "Uses_qcom_bsp_legacy": $(if $(filter true,$(TARGET_USES_QCOM_BSP_LEGACY)),true,false)'; \
+	echo '    "Uses_qcom_bsp_legacy": $(if $(filter true,$(TARGET_USES_QCOM_BSP_LEGACY)),true,false),'; \
+	echo '    "Uses_qcom_hardware": $(if $(filter true,$(BOARD_USES_QCOM_HARDWARE)),true,false)'; \
 	echo '},'; \
 	echo '') > $(SOONG_VARIABLES_TMP)
-- 
2.16.2

