From 438b0b90a271a6a2057ea4685ed55d25883ef8bc Mon Sep 17 00:00:00 2001
From: YumeMichi <do4suki@gmail.com>
Date: Fri, 28 Apr 2017 17:05:46 +0800
Subject: [PATCH 3/3] CMUpdater: Fix parsing date after changing the OTA
 filename

Signed-off-by: YumeMichi <do4suki@gmail.com>
---
 src/com/cyanogenmod/updater/utils/Utils.java | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/com/cyanogenmod/updater/utils/Utils.java b/src/com/cyanogenmod/updater/utils/Utils.java
index 3deb8cd..a8e9106 100644
--- a/src/com/cyanogenmod/updater/utils/Utils.java
+++ b/src/com/cyanogenmod/updater/utils/Utils.java
@@ -106,13 +106,13 @@ public class Utils {
 
     public static long getTimestampFromFileName(String fileName) {
         String[] subStrings = fileName.split("-");
-        if (subStrings.length < 3 || subStrings[2].length() < 8) {
+        if (subStrings.length < 3 || subStrings[3].length() < 8) {
             Log.e(TAG, "The given filename is not valid: " + fileName);
             return 0;
         }
         SimpleDateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
         try {
-            return (dateFormat.parse(subStrings[2]).getTime() / 1000);
+            return (dateFormat.parse(subStrings[3]).getTime() / 1000);
         } catch (ParseException e) {
             Log.e(TAG, "The given filename is not valid: " + fileName);
             return 0;
@@ -209,3 +209,4 @@ public class Utils {
     }
 
 }
+
-- 
2.13.1

