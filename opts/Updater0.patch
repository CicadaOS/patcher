From c60ef8452d212ca210c21918b6de5358e3950a1b Mon Sep 17 00:00:00 2001
From: YumeMichi <do4suki@gmail.com>
Date: Thu, 31 Aug 2017 00:01:37 +0000
Subject: [PATCH 1/2] Updater: Don't append "/v1/*" to serverUrl

Signed-off-by: YumeMichi <do4suki@gmail.com>
---
 src/org/lineageos/updater/misc/Utils.java | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/src/org/lineageos/updater/misc/Utils.java b/src/org/lineageos/updater/misc/Utils.java
index f15be50..17de87d 100644
--- a/src/org/lineageos/updater/misc/Utils.java
+++ b/src/org/lineageos/updater/misc/Utils.java
@@ -148,10 +148,11 @@ public class Utils {
         if (serverUrl.trim().isEmpty()) {
             serverUrl = context.getString(R.string.conf_update_server_url_def);
         }
-        String incrementalVersion = SystemProperties.get(Constants.PROP_BUILD_VERSION_INCREMENTAL);
-        String device = SystemProperties.get(Constants.PROP_DEVICE);
-        String type = SystemProperties.get(Constants.PROP_RELEASE_TYPE).toLowerCase(Locale.ROOT);
-        return serverUrl + "/v1/" + device + "/" + type + "/" + incrementalVersion;
+        // String incrementalVersion = SystemProperties.get(Constants.PROP_BUILD_VERSION_INCREMENTAL);
+        // String device = SystemProperties.get(Constants.PROP_DEVICE);
+        // String type = SystemProperties.get(Constants.PROP_RELEASE_TYPE).toLowerCase(Locale.ROOT);
+        // return serverUrl + "/v1/" + device + "/" + type + "/" + incrementalVersion;
+        return serverUrl;
     }
 
     public static void triggerUpdate(Context context, String downloadId) {
-- 
2.14.1

