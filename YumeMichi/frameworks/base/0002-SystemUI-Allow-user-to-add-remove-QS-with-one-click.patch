From acd2aa67a9c6a46605a00597416e32e85a3ef31c Mon Sep 17 00:00:00 2001
From: Andrzej Ressel <jereksel@gmail.com>
Date: Wed, 9 Aug 2017 00:11:16 +0200
Subject: [PATCH 2/2] SystemUI: Allow user to add/remove QS with one click

Demo: https://www.youtube.com/watch?v=SlnRKLa4K7o

Change-Id: I9250fe5fd6a3edf567f1f4d30fd86838f5ef4610
---
 .../src/com/android/systemui/qs/customize/TileAdapter.java         | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/packages/SystemUI/src/com/android/systemui/qs/customize/TileAdapter.java b/packages/SystemUI/src/com/android/systemui/qs/customize/TileAdapter.java
index 5adeec3..d5630ac 100644
--- a/packages/SystemUI/src/com/android/systemui/qs/customize/TileAdapter.java
+++ b/packages/SystemUI/src/com/android/systemui/qs/customize/TileAdapter.java
@@ -280,8 +280,13 @@ public class TileAdapter extends RecyclerView.Adapter<Holder> implements TileSta
         holder.mTileView.handleStateChanged(info.state);
         holder.mTileView.setShowAppLabel(position > mEditIndex && !info.isSystem);
 
+        final boolean selectable = mAccessibilityAction == ACTION_NONE || position < mEditIndex;
+        if (!(mAccessibilityManager.isTouchExplorationEnabled() && selectable)) {
+            holder.mTileView.setOnClickListener(v -> move(holder.getAdapterPosition(),
+                    mEditIndex, holder.mTileView));
+        }
+
         if (mAccessibilityManager.isTouchExplorationEnabled()) {
-            final boolean selectable = mAccessibilityAction == ACTION_NONE || position < mEditIndex;
             holder.mTileView.setClickable(selectable);
             holder.mTileView.setFocusable(selectable);
             holder.mTileView.setImportantForAccessibility(selectable
-- 
2.7.4

